(()=>{const e=new class{idCheck(){const e=new Set,t=[];document.querySelectorAll("[id]").forEach((r=>{const o=r.id;e.has(o)?t.push(o):e.add(o)})),t.length>0&&console.error("boosted-html error: duplicated id found (",t,")")}handleImport(){const e=document.querySelectorAll("include"),t=[];return e.forEach((e=>{const r=e.getAttribute("url");if(r){const o=fetch(r).then((e=>e.text())).then((t=>{e.outerHTML=t})).catch((e=>{console.error("boosted-html error: failed to retrieve include (",e,")")}));t.push(o)}})),Promise.all(t)}evaluateComponent(e){document.querySelectorAll(`[${e}]`).forEach((e=>{let t=e.tagName.toLowerCase(),r=document.createElement("read");r.innerHTML=e.innerHTML,r.setAttribute("target",t),e.removeAttribute("component");for(var o=0;o<e.attributes.length;o++){var n=e.attributes[o];r.setAttribute(n.name,n.value)}e.parentNode.replaceChild(r,e)}))}componentTag(){e.evaluateComponent("component"),e.evaluateComponent("data-component")}readTag(){let t=document.getElementsByTagName("read");for(let n=0;n<t.length;n++){e.slotCount+=1;let a=t[n],l=a.getAttribute("target"),c=document.getElementById(l);const d=a.innerHTML;if(l)if(c){let e="";"template"===c.tagName.toLowerCase()?c.content.childNodes.forEach((t=>{e+=t.nodeType===Node.ELEMENT_NODE?t.outerHTML:t.textContent})):e=c.innerHTML,a.innerHTML=e;let t=a.getElementsByTagName("slot");a.hasAttribute("data-original-slot")||a.setAttribute("data-original-slot",d);for(let e=0;e<t.length;e++){let r=t[e];a.innerHTML=a.innerHTML.replace(r.outerHTML,a.getAttribute("data-original-slot"))}for(var r=0;r<a.attributes.length;r++){var o=a.attributes[r];a.innerHTML=a.innerHTML.replace(`{{prop:${o.name}}}`,o.value)}}else console.error('boosted-html error: read target with id "',l,'" not found');else console.error("boosted-html error: read target not mentioned")}}replaceTag(){let e=document.getElementsByTagName("replace");for(var t=0;t<e.length;t++){let a=e[t];var r=a.getAttribute("target"),o=a.getAttribute("from"),n=a.getAttribute("to");let l=document.getElementById(r);l?l.innerHTML=l.innerHTML.replace(o,n):console.error('boosted-html error: replace target with id "',r,'" not found'),a.remove()}}createCustomElement(e){const t="scoped-"+Math.random().toString(36).substring(2);return customElements.define(t,class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML='<div style="all:initial">'+e+"</div>"}}),document.createElement(t)}replaceScopedElements(t){document.querySelectorAll(`[${t}]`).forEach((r=>{r.removeAttribute(t);const o=r.outerHTML,n=e.createCustomElement(o);r.parentNode.replaceChild(n,r)}))}scopedElements(){e.replaceScopedElements("scoped"),e.replaceScopedElements("data-scoped")}async main(){e.idCheck(),await e.handleImport(),e.componentTag(),e.readTag(),e.replaceTag(),e.scopedElements()}reactive(e,t){setInterval(e,t)}};e.reactive(e.main,53)})();