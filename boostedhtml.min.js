(()=>{const e=new class{idCheck(){const e=new Set,t=[];document.querySelectorAll("[id]").forEach((r=>{const o=r.id;e.has(o)?t.push(o):e.add(o)})),t.length>0&&console.error("boosted-html error: duplicated id found (",t,")")}handleImport(e){const t=document.querySelectorAll(`[${e}]`),r=[];return t.forEach((t=>{const o=t.getAttribute(e);if(o){const e=fetch(o).then((e=>e.text())).then((e=>{t.outerHTML=e})).catch((e=>{console.error("boosted-html error: failed to retrieve include (",e,")")}));r.push(e)}})),Promise.all(r)}evaluateComponent(e){document.querySelectorAll(`[${e}]`).forEach((e=>{let t=e.tagName.toLowerCase(),r=document.createElement("div");r.innerHTML=e.innerHTML,r.setAttribute("b-read",t),e.removeAttribute("component");for(var o=0;o<e.attributes.length;o++){var n=e.attributes[o];r.setAttribute(n.name,n.value)}e.parentNode.replaceChild(r,e)}))}readAttribute(e){document.querySelectorAll(`*[${e}]`).forEach((t=>{let r=t.getAttribute(e),o=document.getElementById(r);const n=t.innerHTML;if(r)if(o){let i="";"template"===o.tagName.toLowerCase()?o.content.childNodes.forEach((e=>{i+=e.nodeType===Node.ELEMENT_NODE?e.outerHTML:e.textContent})):i=o.innerHTML,t.innerHTML=i;let d=t.getElementsByTagName("slot");t.hasAttribute("data-original-slot")||t.setAttribute("data-original-slot",n);for(let e=0;e<d.length;e++){let r=d[e];t.innerHTML=t.innerHTML.replace(r.outerHTML,t.getAttribute("data-original-slot"))}for(var l=0;l<t.attributes.length;l++){var a=t.attributes[l],c=new RegExp(`{{prop:${a.name}}}`,"g");t.innerHTML=t.innerHTML.replace(c,a.value)}t.hasAttribute("data-boosted-internal-event")||t.setAttribute("ref-boost-read",r),t.removeAttribute(e)}else console.error('boosted-html error: b-read reference with id "',r,'" not found');else console.error("boosted-html error: b-read reference not mentioned")}))}createCustomElement(e){const t="scoped-"+Math.random().toString(36).substring(2);return customElements.define(t,class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML='<div style="all:initial">'+e+"</div>"}}),document.createElement(t)}replaceScopedElements(t){document.querySelectorAll(`[${t}]`).forEach((r=>{r.removeAttribute(t);const o=r.outerHTML,n=e.createCustomElement(o);r.parentNode.replaceChild(n,r)}))}generateRandomString(e){let t="";for(let r=0;r<e;r++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(62*Math.random())];return t}writeFunction(t,r){(0!=r?r:event.target.innerHTML).outerHTML=`<div data-boosted-internal-event b-read="${t}"></div>`,document.querySelectorAll("*[ref-boost-read]").forEach((e=>{var t=e.getAttribute("ref-boost-read");e.removeAttribute("ref-boost-read"),e.setAttribute("b-read",t)})),e.main()}htmlEventListener(e){document.querySelectorAll("*").forEach((t=>{let r="false";const o=t.attributes;t.hasAttribute("?target")&&(r=`document.getElementById("${t.getAttribute("?target")}")`);for(let n=0;n<o.length;n++){let l=o[n];if(l.name.startsWith(e+":")){const o=l.name.slice(e.length+1),n=`boosted.writeFunction("${l.value}", ${r})`;t.removeAttribute(l.name),t.setAttribute(o,n)}}}))}reactive(){let t=document.querySelectorAll("*[b-read]");console.log(t.length),t.length>0&&e.readAttribute("b-read"),document.querySelectorAll("*[b-import]").length>0&&e.handleImport("b-import"),document.querySelectorAll("*[b-component]").length>0&&e.evaluateComponent("b-component"),document.querySelectorAll("*[b-scoped]").length>0&&e.replaceScopedElements("b-scoped"),document.querySelectorAll("*[b-import]").length>0&&e.handleImport("b-import"),e.idCheck()}beReactive(){new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&e.reactive()}))})).observe(document.body,{childList:!0,subtree:!0})}async main(){e.idCheck(),e.handleImport("b-import"),e.evaluateComponent("b-component"),e.readAttribute("b-read"),e.replaceScopedElements("b-scoped"),e.htmlEventListener("b-read")}};document.addEventListener("DOMContentLoaded",(()=>{e.main(),e.beReactive()}))})();