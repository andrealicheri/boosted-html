(()=>{function e(e){document.querySelectorAll(`[${e}]`).forEach((e=>{let t=e.tagName.toLowerCase(),r=document.createElement("read");r.innerHTML=e.innerHTML,r.setAttribute("target",t),e.removeAttribute("component");for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];r.setAttribute(o.name,o.value)}e.parentNode.replaceChild(r,e)}))}function t(e){document.querySelectorAll(`[${e}]`).forEach((t=>{t.removeAttribute(e);const r=function(e){const t="scoped-"+Math.random().toString(36).substring(2);return customElements.define(t,class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=e}}),document.createElement(t)}(t.outerHTML);t.parentNode.replaceChild(r,t)}))}async function r(){!function(){const e=new Set,t=[];document.querySelectorAll("[id]").forEach((r=>{const n=r.id;e.has(n)?t.push(n):e.add(n)})),t.length>0&&console.error("boosted-html error: duplicated id found (",t,")")}(),await function(){const e=document.querySelectorAll("include"),t=[];return e.forEach((e=>{const r=e.getAttribute("url");if(r){const n=fetch(r).then((e=>e.text())).then((t=>{e.innerHTML=t})).catch((e=>{console.error("boosted-html error: failed to retrieve include (",e,")")}));t.push(n)}})),Promise.all(t)}(),e("component"),e("data-component"),function(){let e=document.getElementsByTagName("read");for(let o=0;o<e.length;o++){let l=e[o],c=l.getAttribute("target"),a=document.getElementById(c);const i=l.innerHTML;if(c)if(a){let e="";"template"===a.tagName.toLowerCase()?a.content.childNodes.forEach((t=>{e+=t.nodeType===Node.ELEMENT_NODE?t.outerHTML:t.textContent})):e=a.innerHTML,l.innerHTML=e;let o=l.getElementsByTagName("slot");for(let e=0;e<o.length;e++){let t=o[e];l.innerHTML=l.innerHTML.replace(t.outerHTML,i)}let c=document.createElement("div");for(var t;l.firstChild;)c.appendChild(l.firstChild);for(t=l.attributes.length-1;t>=0;--t)c.attributes.setNamedItem(l.attributes[t].cloneNode());for(var r=0;r<c.attributes.length;r++){var n=c.attributes[r];c.innerHTML=c.innerHTML.replace(`{{prop:${n.name}}}`,n.value)}l.parentNode.replaceChild(c,l),c.removeAttribute("target")}else console.error('boosted-html error: read target with id "',c,'" not found');else console.error("boosted-html error: read target not mentioned")}}(),function(){let e=document.getElementsByTagName("replace");for(var t=0;t<e.length;t++){let l=e[t];var r=l.getAttribute("target"),n=l.getAttribute("from"),o=l.getAttribute("to");let c=document.getElementById(r);c?c.innerHTML=c.innerHTML.replace(n,o):console.error('boosted-html error: replace target with id "',r,'" not found'),l.remove()}}(),t("scoped"),t("data-scoped")}function n(e){const t=document.querySelectorAll(e),r={};t.forEach((e=>{const t=e.outerHTML;r[t]?e.parentNode.removeChild(e):r[t]=!0}))}function o(e){fetch(e).then((e=>e.text())).then((e=>{document.body.innerHTML=function(e){const t=document.createElement("div");t.innerHTML=e;const r=t.querySelector("title");return r&&(document.title=r.textContent,r.remove()),t.querySelectorAll("meta").forEach((e=>{e.parentNode.removeChild(e)})),t.innerHTML}(e),n("script"),n("link")})).catch(window.location.href=e)}r(),setTimeout(r,53),window.addEventListener("popstate",(()=>o(window.location.pathname))),document.querySelectorAll("[route]").forEach((e=>{e.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(t=>{var r;t.preventDefault(),r=e.getAttribute("href"),history.pushState(null,null,r),o(r)}))}))}))})();