(()=>{const e=new class{idCheck(){const e=new Set,t=[];document.querySelectorAll("[id]").forEach((r=>{const n=r.id;e.has(n)?t.push(n):e.add(n)})),t.length>0&&console.error("boosted-html error: duplicated id found (",t,")")}handleImport(){const e=document.querySelectorAll("include"),t=[];return e.forEach((e=>{const r=e.getAttribute("url");if(r){const n=fetch(r).then((e=>e.text())).then((t=>{e.outerHTML=t})).catch((e=>{console.error("boosted-html error: failed to retrieve include (",e,")")}));t.push(n)}})),Promise.all(t)}evaluateComponent(e){document.querySelectorAll(`[${e}]`).forEach((e=>{let t=e.tagName.toLowerCase(),r=document.createElement("read");r.innerHTML=e.innerHTML,r.setAttribute("target",t),e.removeAttribute("component");for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];r.setAttribute(o.name,o.value)}e.parentNode.replaceChild(r,e)}))}componentTag(){e.evaluateComponent("component"),e.evaluateComponent("data-component")}readTag(){let t=document.getElementsByTagName("read");for(let a=0;a<t.length;a++){e.slotCount+=1;let l=t[a],i=l.getAttribute("target"),c=document.getElementById(i);const d=l.innerHTML;if(i)if(c){let e="";"template"===c.tagName.toLowerCase()?c.content.childNodes.forEach((t=>{e+=t.nodeType===Node.ELEMENT_NODE?t.outerHTML:t.textContent})):e=c.innerHTML,l.innerHTML=e;let t=l.getElementsByTagName("slot");l.hasAttribute("data-original-slot")||l.setAttribute("data-original-slot",d);for(let e=0;e<t.length;e++){let r=t[e];l.innerHTML=l.innerHTML.replace(r.outerHTML,l.getAttribute("data-original-slot"))}for(var r=0;r<l.attributes.length;r++){var n=l.attributes[r];l.innerHTML=l.innerHTML.replace(`{{prop:${n.name}}}`,n.value)}if(l.hasAttribute("data-boosted-internal-event")){var o=document.createElement("div");o.innerHTML=l.innerHTML,""!=l.id&&(o.id=l.id),l.replaceWith(o)}}else console.error('boosted-html error: read target with id "',i,'" not found');else console.error("boosted-html error: read target not mentioned")}}replaceTag(){let e=document.getElementsByTagName("replace");for(var t=0;t<e.length;t++){let a=e[t];var r=a.getAttribute("target"),n=a.getAttribute("from"),o=a.getAttribute("to");let l=document.getElementById(r);l?l.innerHTML=l.innerHTML.replace(n,o):console.error('boosted-html error: replace target with id "',r,'" not found'),a.remove()}}createCustomElement(e){const t="scoped-"+Math.random().toString(36).substring(2);return customElements.define(t,class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).innerHTML='<div style="all:initial">'+e+"</div>"}}),document.createElement(t)}replaceScopedElements(t){document.querySelectorAll(`[${t}]`).forEach((r=>{r.removeAttribute(t);const n=r.outerHTML,o=e.createCustomElement(n);r.parentNode.replaceChild(o,r)}))}scopedElements(){e.replaceScopedElements("scoped"),e.replaceScopedElements("data-scoped")}writeFunction(e,t){let r=t??event.target;var n;n=t.hasAttribute("discard-attribute")?"":`id="${r.id}"`,r.outerHTML=`<read data-boosted-internal-event ${n} target="${e}"></read>`}htmlEventListener(e){document.querySelectorAll("*").forEach((t=>{let r="null";const n=t.attributes;if(t.hasAttribute("?target")&&(r=`document.getElementById("${t.getAttribute("?target")}")`,t.hasAttribute("?discard-attribute"))){let e=t.getAttribute("?target");document.getElementById(e).setAttribute("discard-attribute",!0)}for(let o=0;o<n.length;o++){let a=n[o];if(a.name.startsWith(e+":")){const n=a.name.slice(e.length+1),o=`boosted.writeFunction("${a.value}", ${r})`;t.removeAttribute(a.name),t.setAttribute(n,o)}}}))}interactivity(){e.htmlEventListener("html"),e.htmlEventListener("data-html")}async main(){e.idCheck(),await e.handleImport(),e.componentTag(),e.readTag(),e.replaceTag(),e.scopedElements(),e.interactivity()}reactive(e,t){setInterval(e,t)}};e.reactive(e.main,53)})();