(()=>{function e(e){document.querySelectorAll(`[${e}]`).forEach((e=>{let t=e.outerHTML,n=e.innerHTML,o=t.split("<")[1].split(" ")[0],r=document.createElement("read");r.innerHTML=n,r.setAttribute("target",o),e.removeAttribute("component");for(var c=0;c<e.attributes.length;c++){var l=e.attributes[c];r.setAttribute(l.name,l.value)}e.parentNode.replaceChild(r,e)}))}function t(e){document.querySelectorAll(`[${e}]`).forEach((t=>{t.removeAttribute(e);const n=function(e){const t="scoped-"+Math.random().toString(36).substring(2);return customElements.define(t,class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=e}}),document.createElement(t)}(t.outerHTML);t.parentNode.replaceChild(n,t)}))}async function n(){!function(){const e=new Set,t=[];document.querySelectorAll("[id]").forEach((n=>{const o=n.id;e.has(o)?t.push(o):e.add(o)})),t.length>0&&console.error("boosted-html error: duplicated id found (",t,")")}(),await function(){const e=document.querySelectorAll("include"),t=[];return e.forEach((e=>{const n=e.getAttribute("url");if(n){const o=fetch(n).then((e=>e.text())).then((t=>{e.innerHTML=t})).catch((e=>{console.error("boosted-html error: failed to retrieve include (",e,")")}));t.push(o)}})),Promise.all(t)}(),e("component"),e("data-component"),function(){let e=document.getElementsByTagName("read");for(let t=0;t<e.length;t++){let n=e[t];const o=n.innerHTML;let r=n.getAttribute("target"),c=document.getElementById(r);if(c){let e="";"template"===c.tagName.toLowerCase()?c.content.childNodes.forEach((t=>{e+=t.nodeType===Node.ELEMENT_NODE?t.outerHTML:t.textContent})):e=c.innerHTML,n.innerHTML=e;let t=n.getElementsByTagName("slot");for(let e=0;e<t.length;e++){let r=t[e];n.innerHTML=n.innerHTML.replace(r.outerHTML,o)}}else console.error('boosted-html error: read target with id "',r,'" not found')}}(),function(){let e=document.getElementsByTagName("replace");for(var t=0;t<e.length;t++){let c=e[t];var n=c.getAttribute("target"),o=c.getAttribute("from"),r=c.getAttribute("to");let l=document.getElementById(n);l?l.innerHTML=l.innerHTML.replace(o,r):console.error('boosted-html error: replace target with id "',n,'" not found'),c.remove()}}(),t("scoped"),t("data-scoped")}function o(e){const t=document.querySelectorAll(e),n={};t.forEach((e=>{const t=e.outerHTML;n[t]?e.parentNode.removeChild(e):n[t]=!0}))}function r(e){fetch(e).then((e=>e.text())).then((e=>{document.body.innerHTML=function(e){const t=document.createElement("div");t.innerHTML=e;const n=t.querySelector("title");return n&&(document.title=n.textContent,n.remove()),t.querySelectorAll("meta").forEach((e=>{e.parentNode.removeChild(e)})),t.innerHTML}(e),o("script"),o("link"),n()})).catch(window.location.href=e)}n(),window.addEventListener("popstate",(()=>r(window.location.pathname)&&n())),document.querySelectorAll("[route]").forEach((e=>{e.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(t=>{var n;t.preventDefault(),n=e.getAttribute("href"),history.pushState(null,null,n),r(n)}))}))}))})();