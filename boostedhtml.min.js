(()=>{function e(e){document.querySelectorAll(`[${e}]`).forEach((e=>{let t=e.outerHTML,r=e.innerHTML,n=t.split("<")[1].split(" ")[0],o=document.createElement("read");o.innerHTML=r,o.setAttribute("target",n),e.removeAttribute("component");for(var l=0;l<e.attributes.length;l++){var c=e.attributes[l];o.setAttribute(c.name,c.value)}e.parentNode.replaceChild(o,e)}))}function t(e){document.querySelectorAll(`[${e}]`).forEach((t=>{t.removeAttribute(e);const r=function(e){const t="scoped-"+Math.random().toString(36).substring(2);return customElements.define(t,class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=e}}),document.createElement(t)}(t.outerHTML);t.parentNode.replaceChild(r,t)}))}async function r(){!function(){const e=new Set,t=[];document.querySelectorAll("[id]").forEach((r=>{const n=r.id;e.has(n)?t.push(n):e.add(n)})),t.length>0&&console.error("boosted-html error: duplicated id found (",t,")")}(),await function(){const e=document.querySelectorAll("include"),t=[];return e.forEach((e=>{const r=e.getAttribute("url");if(r){const n=fetch(r).then((e=>e.text())).then((t=>{e.innerHTML=t})).catch((e=>{console.error("boosted-html error: failed to retrieve include (",e,")")}));t.push(n)}})),Promise.all(t)}(),e("component"),e("data-component"),function(){let e=document.getElementsByTagName("read");for(let r=0;r<e.length;r++){let n=e[r];const o=n.innerHTML;let l=n.getAttribute("target"),c=document.getElementById(l);if(c){let e="";"template"===c.tagName.toLowerCase()?c.content.childNodes.forEach((t=>{e+=t.nodeType===Node.ELEMENT_NODE?t.outerHTML:t.textContent})):e=c.innerHTML,n.innerHTML=e;let r=n.getElementsByTagName("slot");for(let e=0;e<r.length;e++){let t=r[e];n.innerHTML=n.innerHTML.replace(t.outerHTML,o)}let l=document.createElement("div");for(var t;n.firstChild;)l.appendChild(n.firstChild);for(t=n.attributes.length-1;t>=0;--t)l.attributes.setNamedItem(n.attributes[t].cloneNode());n.parentNode.replaceChild(l,n),l.removeAttribute("target")}else console.error('boosted-html error: read target with id "',l,'" not found')}}(),function(){let e=document.getElementsByTagName("replace");for(var t=0;t<e.length;t++){let l=e[t];var r=l.getAttribute("target"),n=l.getAttribute("from"),o=l.getAttribute("to");let c=document.getElementById(r);c?c.innerHTML=c.innerHTML.replace(n,o):console.error('boosted-html error: replace target with id "',r,'" not found'),l.remove()}}(),t("scoped"),t("data-scoped")}function n(e){const t=document.querySelectorAll(e),r={};t.forEach((e=>{const t=e.outerHTML;r[t]?e.parentNode.removeChild(e):r[t]=!0}))}function o(e){fetch(e).then((e=>e.text())).then((e=>{document.body.innerHTML=function(e){const t=document.createElement("div");t.innerHTML=e;const r=t.querySelector("title");return r&&(document.title=r.textContent,r.remove()),t.querySelectorAll("meta").forEach((e=>{e.parentNode.removeChild(e)})),t.innerHTML}(e),n("script"),n("link")})).catch(window.location.href=e)}r(),setTimeout(r,53),window.addEventListener("popstate",(()=>o(window.location.pathname))),document.querySelectorAll("[route]").forEach((e=>{e.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(t=>{var r;t.preventDefault(),r=e.getAttribute("href"),history.pushState(null,null,r),o(r)}))}))}))})();